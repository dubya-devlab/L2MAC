[{"id": "chatcmpl-8K1AD47wsMc2Uhs8glRi6WS7WZAmA", "object": "chat.completion", "created": 1699781725, "model": "gpt-4", "prompt_filter_results": [{"prompt_index": 0, "content_filter_results": {"hate": {"filtered": false, "severity": "safe"}, "self_harm": {"filtered": false, "severity": "safe"}, "sexual": {"filtered": false, "severity": "safe"}, "violence": {"filtered": false, "severity": "safe"}}}], "choices": [{"index": 0, "finish_reason": "stop", "message": {"role": "assistant", "function_call": {"name": "write_files", "arguments": "{\n  \"files_and_contents\": [\n    {\n      \"file_path\": \"app.py\",\n      \"file_contents\": \"from flask import Flask, request, jsonify\\nfrom user import User\\nfrom post import Post\\n\\napp = Flask(__name__)\\n\\nusers = {}\\nposts = {}\\n\\n@app.route('/register', methods=['POST'])\\ndef register():\\n\\tdata = request.get_json()\\n\\tuser = User(**data)\\n\\tusers[user.email] = user\\n\\treturn jsonify(user.to_dict()), 201\\n\\n@app.route('/login', methods=['POST'])\\ndef login():\\n\\tdata = request.get_json()\\n\\tuser = users.get(data['email'])\\n\\tif user and user.password == data['password']:\\n\\t\\treturn jsonify(user.to_dict()), 200\\n\\treturn jsonify({'message': 'Invalid credentials'}), 401\\n\\n@app.route('/users/<email>', methods=['GET'])\\ndef get_user(email):\\n\\tuser = users.get(email)\\n\\tif user:\\n\\t\\treturn jsonify(user.to_dict()), 200\\n\\treturn jsonify({'message': 'User not found'}), 404\\n\\n@app.route('/users/<email>', methods=['PUT'])\\ndef update_user(email):\\n\\tdata = request.get_json()\\n\\tuser = users.get(email)\\n\\tif user:\\n\\t\\tuser.update(**data)\\n\\t\\treturn jsonify(user.to_dict()), 200\\n\\treturn jsonify({'message': 'User not found'}), 404\\n\\n@app.route('/posts', methods=['POST'])\\ndef create_post():\\n\\tdata = request.get_json()\\n\\tpost = Post(**data)\\n\\tposts[post.id] = post\\n\\treturn jsonify(post.to_dict()), 201\\n\\n@app.route('/posts/<id>', methods=['GET'])\\ndef get_post(id):\\n\\tpost = posts.get(id)\\n\\tif post:\\n\\t\\treturn jsonify(post.to_dict()), 200\\n\\treturn jsonify({'message': 'Post not found'}), 404\\n\\n@app.route('/posts/<id>', methods=['DELETE'])\\ndef delete_post(id):\\n\\tpost = posts.get(id)\\n\\tif post:\\n\\t\\tdel posts[id]\\n\\t\\treturn jsonify({'message': 'Post deleted'}), 200\\n\\treturn jsonify({'message': 'Post not found'}), 404\\n\\nif __name__ == '__main__':\\n\\tapp.run(debug=True)\"\n    },\n    {\n      \"file_path\": \"user.py\",\n      \"file_contents\": \"from dataclasses import dataclass, field\\n\\n@dataclass\\nclass User:\\n\\temail: str\\n\\tusername: str\\n\\tpassword: str\\n\\tprofile_picture: str = field(default=None)\\n\\tbio: str = field(default=None)\\n\\twebsite_link: str = field(default=None)\\n\\tlocation: str = field(default=None)\\n\\tprivate: bool = field(default=False)\\n\\n\\tdef to_dict(self):\\n\\t\\treturn self.__dict__\\n\\n\\tdef update(self, **kwargs):\\n\\t\\tfor key, value in kwargs.items():\\n\\t\\t\\tif hasattr(self, key):\\n\\t\\t\\t\\tsetattr(self, key, value)\"\n    },\n    {\n      \"file_path\": \"post.py\",\n      \"file_contents\": \"from dataclasses import dataclass, field\\nfrom datetime import datetime\\nimport uuid\\n\\n@dataclass\\nclass Post:\\n\\tuser_email: str\\n\\tcontent: str\\n\\timage: str = field(default=None)\\n\\tid: str = field(default_factory=lambda: str(uuid.uuid4()))\\n\\tcreated_at: datetime = field(default_factory=datetime.now)\\n\\n\\tdef to_dict(self):\\n\\t\\treturn self.__dict__\"\n    }\n  ]\n}"}}, "content_filter_results": {}}], "usage": {"prompt_tokens": 1507, "completion_tokens": 805, "total_tokens": 2312}}]