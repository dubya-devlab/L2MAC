[{"id": "chatcmpl-8KO0KbdApl7GB6WiOG51Vl651Nyj8", "object": "chat.completion", "created": 1699869524, "model": "gpt-4", "prompt_filter_results": [{"prompt_index": 0, "content_filter_results": {"hate": {"filtered": false, "severity": "safe"}, "self_harm": {"filtered": false, "severity": "safe"}, "sexual": {"filtered": false, "severity": "safe"}, "violence": {"filtered": false, "severity": "safe"}}}], "choices": [{"index": 0, "finish_reason": "stop", "message": {"role": "assistant", "function_call": {"name": "write_files", "arguments": "{\n  \"files_and_contents\": [\n    {\n      \"file_path\": \"app.py\",\n      \"file_contents\": \"from flask import Flask, request, jsonify\\nfrom dataclasses import dataclass\\n\\napp = Flask(__name__)\\n\\n# Mock database\\nDATABASE = {\\n\\t'users': {},\\n\\t'clubs': {},\\n\\t'meetings': {},\\n\\t'forums': {},\\n\\t'comments': {},\\n\\t'votes': {},\\n\\t'profiles': {},\\n\\t'follows': {},\\n\\t'reading_lists': {},\\n\\t'recommendations': {},\\n\\t'admins': {},\\n\\t'moderations': {},\\n\\t'analytics': {}\\n}\\n\\n@dataclass\\nclass User:\\n\\tid: str\\n\\tname: str\\n\\n@dataclass\\nclass Club:\\n\\tid: str\\n\\tname: str\\n\\tprivacy: str\\n\\n@dataclass\\nclass Meeting:\\n\\tid: str\\n\\tclub_id: str\\n\\tschedule: str\\n\\n@dataclass\\nclass Forum:\\n\\tid: str\\n\\tclub_id: str\\n\\n@dataclass\\nclass Comment:\\n\\tid: str\\n\\tuser_id: str\\n\\tforum_id: str\\n\\tcontent: str\\n\\n@dataclass\\nclass Vote:\\n\\tid: str\\n\\tuser_id: str\\n\\tbook: str\\n\\n@dataclass\\nclass Profile:\\n\\tid: str\\n\\tuser_id: str\\n\\tbio: str\\n\\n@dataclass\\nclass Follow:\\n\\tid: str\\n\\tfollower_id: str\\n\\tfollowee_id: str\\n\\n@dataclass\\nclass ReadingList:\\n\\tid: str\\n\\tuser_id: str\\n\\tbooks: list\\n\\n@dataclass\\nclass Recommendation:\\n\\tid: str\\n\\tuser_id: str\\n\\tbook: str\\n\\n@dataclass\\nclass Admin:\\n\\tid: str\\n\\tuser_id: str\\n\\n@dataclass\\nclass Moderation:\\n\\tid: str\\n\\tadmin_id: str\\n\\tcontent_id: str\\n\\taction: str\\n\\n@dataclass\\nclass Analytics:\\n\\tid: str\\n\\tmetric: str\\n\\tvalue: int\\n\\nif __name__ == '__main__':\\n\\tapp.run(debug=True)\"\n    },\n    {\n      \"file_path\": \"test_app.py\",\n      \"file_contents\": \"import pytest\\nimport app\\n\\n# Test data\\nuser = app.User(id='1', name='Test User')\\nclub = app.Club(id='1', name='Test Club', privacy='public')\\nmeeting = app.Meeting(id='1', club_id='1', schedule='2022-12-31 12:00:00')\\nforum = app.Forum(id='1', club_id='1')\\ncomment = app.Comment(id='1', user_id='1', forum_id='1', content='Test comment')\\nvote = app.Vote(id='1', user_id='1', book='Test Book')\\nprofile = app.Profile(id='1', user_id='1', bio='Test bio')\\nfollow = app.Follow(id='1', follower_id='1', followee_id='2')\\nreading_list = app.ReadingList(id='1', user_id='1', books=['Test Book'])\\nrecommendation = app.Recommendation(id='1', user_id='1', book='Test Book')\\nadmin = app.Admin(id='1', user_id='1')\\nmoderation = app.Moderation(id='1', admin_id='1', content_id='1', action='delete')\\nanalytics = app.Analytics(id='1', metric='users', value=1)\\n\\ndef test_user():\\n\\tassert user.id == '1'\\n\\tassert user.name == 'Test User'\\n\\ndef test_club():\\n\\tassert club.id == '1'\\n\\tassert club.name == 'Test Club'\\n\\tassert club.privacy == 'public'\\n\\ndef test_meeting():\\n\\tassert meeting.id == '1'\\n\\tassert meeting.club_id == '1'\\n\\tassert meeting.schedule == '2022-12-31 12:00:00'\\n\\ndef test_forum():\\n\\tassert forum.id == '1'\\n\\tassert forum.club_id == '1'\\n\\ndef test_comment():\\n\\tassert comment.id == '1'\\n\\tassert comment.user_id == '1'\\n\\tassert comment.forum_id == '1'\\n\\tassert comment.content == 'Test comment'\\n\\ndef test_vote():\\n\\tassert vote.id == '1'\\n\\tassert vote.user_id == '1'\\n\\tassert vote.book == 'Test Book'\\n\\ndef test_profile():\\n\\tassert profile.id == '1'\\n\\tassert profile.user_id == '1'\\n\\tassert profile.bio == 'Test bio'\\n\\ndef test_follow():\\n\\tassert follow.id == '1'\\n\\tassert follow.follower_id == '1'\\n\\tassert follow.followee_id == '2'\\n\\ndef test_reading_list():\\n\\tassert reading_list.id == '1'\\n\\tassert reading_list.user_id == '1'\\n\\tassert reading_list.books == ['Test Book']\\n\\ndef test_recommendation():\\n\\tassert recommendation.id == '1'\\n\\tassert recommendation.user_id == '1'\\n\\tassert recommendation.book == 'Test Book'\\n\\ndef test_admin():\\n\\tassert admin.id == '1'\\n\\tassert admin.user_id == '1'\\n\\ndef test_moderation():\\n\\tassert moderation.id == '1'\\n\\tassert moderation.admin_id == '1'\\n\\tassert moderation.content_id == '1'\\n\\tassert moderation.action == 'delete'\\n\\ndef test_analytics():\\n\\tassert analytics.id == '1'\\n\\tassert analytics.metric == 'users'\\n\\tassert analytics.value == 1\"\n    }\n  ]\n}"}}, "content_filter_results": {}}], "usage": {"prompt_tokens": 1326, "completion_tokens": 1302, "total_tokens": 2628}}]